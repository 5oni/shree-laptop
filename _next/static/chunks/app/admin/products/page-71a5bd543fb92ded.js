(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{8060:(e,t,r)=>{Promise.resolve().then(r.bind(r,9589))},9589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),s=r(2115),d=r(6874),l=r.n(d),i=r(2824),n=r(1511);function c(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(""),[c,o]=(0,s.useState)("all"),[x,u]=(0,s.useState)(!0),[g,p]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[y,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{u(!0);let e=await (0,i.AS)();t(e),p(null)}catch(e){console.error("Failed to load products:",e),p("Failed to load products. Please try again.")}finally{u(!1)}})()},[]);let f=e.filter(e=>{let t=e.name.toLowerCase().includes(r.toLowerCase())||e.specs.toLowerCase().includes(r.toLowerCase())||e.price.toLowerCase().includes(r.toLowerCase()),a="all"===c||e.type===c;return t&&a}),w=async r=>{if(window.confirm("Are you sure you want to delete this product?"))try{await (0,i.DD)(r),t(e.filter(e=>e.id!==r))}catch(e){console.error("Failed to delete product:",e),alert("Failed to delete product. Please try again.")}},j=e=>{m(e),b(!0)},k=async r=>{if(h)try{await (0,i.vc)(h.id,r),t(e.map(e=>e.id===h.id?{...e,...r,updatedAt:new Date().toISOString()}:e)),m(null),b(!1)}catch(e){console.error("Failed to update product:",e),alert("Failed to update product. Please try again.")}},N=e=>{let t=e.currentTarget;t.style.display="none";let r=t.parentElement;r&&(r.innerHTML='<div class="h-12 w-12 flex items-center justify-center bg-gray-200 dark:bg-gray-700 rounded"><span class="text-xs text-gray-500 dark:text-gray-400">No Image</span></div>')};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Products Management"}),(0,a.jsx)(l(),{href:"/admin/products/new",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"Add New Product"})]}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search products...",value:r,onChange:e=>d(e.target.value),className:"flex-grow px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),(0,a.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"laptop",children:"Laptops"}),(0,a.jsx)("option",{value:"accessory",children:"Accessories"})]})]}),g&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:g}),x?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full"})}):(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Image"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Specs"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.length>0?f.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"h-12 w-12 relative",children:e.image&&""!==e.image.trim()?(0,a.jsx)("img",{src:e.image,alt:e.name,className:"h-12 w-12 object-cover rounded",onError:N}):(0,a.jsx)("div",{className:"h-12 w-12 flex items-center justify-center bg-gray-200 dark:bg-gray-700 rounded",children:(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No Image"})})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:e.specs})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.price})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("laptop"===e.type?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"),children:e.type})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>j(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-4",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>w(e.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:"Delete"})]})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No products found matching your criteria."})})})]})}),y&&h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Edit Product"}),(0,a.jsx)("button",{onClick:()=>{m(null),b(!1)},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)(n.A,{product:h,onSubmit:k,isLoading:!1})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[354,874,778,441,684,358],()=>t(8060)),_N_E=e.O()}]);