"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{1511:(e,r,t)=>{t.d(r,{A:()=>c});var a=t(5155),o=t(2115),s=t(5695),i=t(2376);function c(e){let{product:r,onSubmit:t,isLoading:c}=e,d=(0,s.useRouter)(),[n,l]=(0,o.useState)((null==r?void 0:r.name)||""),[u,g]=(0,o.useState)((null==r?void 0:r.specs)||""),[p,m]=(0,o.useState)((null==r?void 0:r.price)||""),[h,y]=(0,o.useState)((null==r?void 0:r.type)||"laptop"),[b,f]=(0,o.useState)((null==r?void 0:r.category)||""),[x,w]=(0,o.useState)((null==r?void 0:r.image)||null),[v,k]=(0,o.useState)(""),[j,N]=(0,o.useState)(!1),[E,U]=(0,o.useState)(null);(0,o.useEffect)(()=>()=>{x&&!x.startsWith("http")&&URL.revokeObjectURL(x)},[x]);let F=async e=>{N(!0);try{return await (0,i.iG)(e)}catch(e){throw console.error("Error uploading image:",e),e}finally{N(!1)}},I=async e=>{if(e.preventDefault(),k(""),!n||!u||!p||!h)return void k("Please fill all required fields");try{let e=x;if(E)try{e=await F(E)}catch(e){console.error("Upload error:",e),k("Failed to upload image. Please try again.");return}let r={name:n,specs:u,price:p,type:h,category:b||void 0,image:e||""};await t(r)}catch(e){k("Failed to save product. Please try again."),console.error(e)}};return(0,a.jsxs)("form",{onSubmit:I,className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[v&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:v}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Product Name*"}),(0,a.jsx)("input",{type:"text",id:"name",value:n,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"specs",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Specifications*"}),(0,a.jsx)("textarea",{id:"specs",value:u,onChange:e=>g(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price*"}),(0,a.jsx)("input",{type:"text",id:"price",value:p,onChange:e=>m(e.target.value),placeholder:"â‚¹0,000",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type*"}),(0,a.jsxs)("select",{id:"type",value:h,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,a.jsx)("option",{value:"laptop",children:"Laptop"}),(0,a.jsx)("option",{value:"accessory",children:"Accessory"})]})]}),"accessory"===h&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),(0,a.jsx)("input",{type:"text",id:"category",value:b,onChange:e=>f(e.target.value),placeholder:"e.g., mouse, keyboard, etc.",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Product Image"}),(0,a.jsxs)("div",{className:"mt-2 space-y-4",children:[x?(0,a.jsxs)("div",{className:"relative rounded-md overflow-hidden border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"h-48 bg-gray-50 dark:bg-gray-800 flex items-center justify-center",children:(0,a.jsx)("img",{src:x,alt:"Product preview",className:"max-h-full max-w-full object-contain"})}),(0,a.jsx)("button",{type:"button",onClick:()=>{x&&!x.startsWith("http")&&URL.revokeObjectURL(x),w(null),U(null)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400","aria-label":"Remove image",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-48 bg-gray-50 dark:bg-gray-800 rounded-md border border-dashed border-gray-300 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"No image selected"})]})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("label",{className:"flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),x?"Change Image":"Upload Image",(0,a.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];return t?t.type.startsWith("image/")?t.size>5242880?void k("Image size should be less than 5MB"):void(x&&!x.startsWith("http")&&URL.revokeObjectURL(x),w(URL.createObjectURL(t)),U(t),k("")):void k("Please upload a valid image file"):void 0},className:"hidden"})]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"Recommended: JPG or PNG format, less than 5MB"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>d.push("/admin/products"),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c||j,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c||j?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),j?"Uploading...":"Saving..."]}):"Save Product"})]})]})}},2099:(e,r,t)=>{t.d(r,{N:()=>a});let a=(0,t(2354).UU)("https://qexwnzdreucbpucqtrda.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFleHduemRyZXVjYnB1Y3F0cmRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MzI4NzAsImV4cCI6MjA3MjQwODg3MH0.qVr0JJ5pGj0BIiibfDF2ryTGCdw1KpsGoJvoTee4KGc")},2376:(e,r,t)=>{let a;t.d(r,{WY:()=>p,DD:()=>h,Us:()=>l,y9:()=>g,d$:()=>u,vc:()=>m,iG:()=>n});var o=t(2099);let s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},i=new Uint8Array(16),c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));let d=function(e,r,t){if(s.randomUUID&&!r&&!e)return s.randomUUID();let o=(e=e||{}).random??e.rng?.()??function(){if(!a){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(i)}();if(o.length<16)throw Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){if((t=t||0)<0||t+16>r.length)throw RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[t+e]=o[e];return r}return function(e,r=0){return(c[e[r+0]]+c[e[r+1]]+c[e[r+2]]+c[e[r+3]]+"-"+c[e[r+4]]+c[e[r+5]]+"-"+c[e[r+6]]+c[e[r+7]]+"-"+c[e[r+8]]+c[e[r+9]]+"-"+c[e[r+10]]+c[e[r+11]]+c[e[r+12]]+c[e[r+13]]+c[e[r+14]]+c[e[r+15]]).toLowerCase()}(o)},n=async e=>{try{if(!e)throw Error("No file provided for upload");if(!e.type.startsWith("image/"))throw Error("Please upload a valid image file");if(e.size>5242880)throw Error("Image size should be less than 5MB");let r=d(),t=e.name.split(".").pop()||"jpg",a="products/".concat(r,".").concat(t),{error:s}=await o.N.storage.from("product-images").upload(a,e,{cacheControl:"3600",upsert:!1});if(s)throw Error("Upload failed: ".concat(s.message));let{data:i}=o.N.storage.from("product-images").getPublicUrl(a);return i.publicUrl}catch(e){throw console.error("Error uploading image:",e),Error("Failed to upload image: "+(e instanceof Error?e.message:"Unknown error"))}},l=async e=>{try{if(!e.includes("supabase"))return;let r=new URL(e).pathname.split("/"),t=r[r.length-1],{error:a}=await o.N.storage.from("product-images").remove(["products/".concat(t)]);if(a)throw console.error("Error deleting image:",a),Error("Failed to delete image")}catch(e){throw console.error("Error deleting image:",e),Error("Failed to delete image")}},u=async()=>{try{let{data:e,error:r}=await o.N.from("products").select("*").order("created_at",{ascending:!1});if(r)throw Error("Failed to fetch products: ".concat(r.message));return e.map(e=>({id:e.id,name:e.name,specs:e.specs,price:e.price,image:e.image,category:e.category||void 0,type:e.type,createdAt:e.created_at,updatedAt:e.updated_at}))}catch(e){throw console.error("Error getting products:",e),Error("Failed to get products")}},g=async e=>{try{let{data:r,error:t}=await o.N.from("products").select("*").eq("id",e).single();if(t){if("PGRST116"===t.code)return null;throw Error("Failed to fetch product: ".concat(t.message))}return{id:r.id,name:r.name,specs:r.specs,price:r.price,image:r.image,category:r.category||void 0,type:r.type,createdAt:r.created_at,updatedAt:r.updated_at}}catch(e){throw console.error("Error getting product:",e),Error("Failed to get product")}},p=async e=>{try{let r=new Date().toISOString(),{data:t,error:a}=await o.N.from("products").insert({name:e.name,specs:e.specs,price:e.price,image:e.image,category:e.category||null,type:e.type,created_at:r,updated_at:r}).select().single();if(a)throw Error("Failed to create product: ".concat(a.message));return{id:t.id,name:t.name,specs:t.specs,price:t.price,image:t.image,category:t.category||void 0,type:t.type,createdAt:t.created_at,updatedAt:t.updated_at}}catch(e){throw console.error("Error creating product:",e),Error("Failed to create product")}},m=async(e,r)=>{try{let t=new Date().toISOString(),{data:a,error:s}=await o.N.from("products").update({name:r.name,specs:r.specs,price:r.price,image:r.image,category:r.category||null,type:r.type,updated_at:t}).eq("id",e).select().single();if(s)throw Error("Failed to update product: ".concat(s.message));return{id:a.id,name:a.name,specs:a.specs,price:a.price,image:a.image,category:a.category||void 0,type:a.type,createdAt:a.created_at,updatedAt:a.updated_at}}catch(e){throw console.error("Error updating product:",e),Error("Failed to update product")}},h=async e=>{try{let{error:r}=await o.N.from("products").delete().eq("id",e);if(r)throw Error("Failed to delete product: ".concat(r.message))}catch(e){throw console.error("Error deleting product:",e),Error("Failed to delete product")}}},2824:(e,r,t)=>{t.d(r,{AS:()=>s,DD:()=>n,WY:()=>c,vc:()=>d,y9:()=>i});var a=t(2376);let o=async e=>await a.Us(e),s=async()=>{try{return await a.d$()}catch(e){throw console.error("Error getting products:",e),Error("Failed to get products")}},i=async e=>{try{return await a.y9(e)||void 0}catch(e){throw console.error("Error getting product:",e),Error("Failed to get product")}},c=async e=>{try{return await a.WY(e)}catch(e){throw console.error("Error creating product:",e),Error("Failed to create product")}},d=async(e,r)=>{try{return await a.vc(e,r)}catch(e){throw console.error("Error updating product:",e),Error("Failed to update product")}},n=async e=>{try{let r=await i(e);r&&r.image&&await o(r.image),await a.DD(e)}catch(e){throw console.error("Error deleting product:",e),Error("Failed to delete product")}}},5695:(e,r,t)=>{var a=t(8999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})}}]);