(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{2099:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});let a=(0,t(2354).UU)("https://qexwnzdreucbpucqtrda.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFleHduemRyZXVjYnB1Y3F0cmRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MzI4NzAsImV4cCI6MjA3MjQwODg3MH0.qVr0JJ5pGj0BIiibfDF2ryTGCdw1KpsGoJvoTee4KGc")},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},5771:(e,r,t)=>{Promise.resolve().then(t.bind(t,9367))},6532:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,O:()=>o});var a=t(5155),s=t(2115),n=t(5695),d=t(2099);let i=(0,s.createContext)(void 0);function o(e){let{children:r}=e,[t,o]=(0,s.useState)(null),[l,u]=(0,s.useState)(!0),c=(0,n.useRouter)();(0,s.useEffect)(()=>{(async()=>{let{data:{session:e}}=await d.N.auth.getSession();if(null==e?void 0:e.user){var r,t,a;o({id:e.user.id,email:e.user.email||"",name:(null==(r=e.user.user_metadata)?void 0:r.name)||(null==(t=e.user.email)?void 0:t.split("@")[0])||"",role:(null==(a=e.user.user_metadata)?void 0:a.role)||"admin"})}u(!1)})();let{data:{subscription:e}}=d.N.auth.onAuthStateChange(async(e,r)=>{if(null==r?void 0:r.user){var t,a,s;o({id:r.user.id,email:r.user.email||"",name:(null==(t=r.user.user_metadata)?void 0:t.name)||(null==(a=r.user.email)?void 0:a.split("@")[0])||"",role:(null==(s=r.user.user_metadata)?void 0:s.role)||"admin"})}else o(null);u(!1)});return()=>e.unsubscribe()},[]);let h=async()=>{await d.N.auth.signOut(),c.push("/login")};return(0,a.jsx)(i.Provider,{value:{user:t,loading:l,signOut:h},children:r})}function l(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9367:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(5155),s=t(2115),n=t(5695),d=t(6874),i=t.n(d),o=t(6532);function l(e){let{children:r}=e,{user:t,loading:d}=(0,o.A)(),i=(0,n.useRouter)();return((0,s.useEffect)(()=>{d||t||i.push("/login")},[t,d,i]),d||!t)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin h-10 w-10 border-4 border-blue-600 rounded-full border-t-transparent"})}):(0,a.jsx)(a.Fragment,{children:r})}function u(e){let{children:r}=e,[t,d]=(0,s.useState)(!1),u=(0,n.useRouter)(),{user:c,signOut:h}=(0,o.A)(),x=async()=>{try{await h(),u.push("/login")}catch(e){console.error("Sign out error:",e)}};return(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-30",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-800 dark:text-white font-montserrat",children:"Admin Dashboard"}),(0,a.jsx)("button",{className:"md:hidden p-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200",onClick:()=>{d(!t)},"aria-label":"Toggle menu",children:t?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,a.jsxs)("nav",{className:"hidden md:flex gap-4 items-center",children:[(0,a.jsx)(i(),{href:"/admin",className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Dashboard"}),(0,a.jsx)(i(),{href:"/admin/products",className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Products"}),(0,a.jsx)(i(),{href:"/",className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Back to Site"}),(0,a.jsx)("div",{className:"border-l border-gray-300 dark:border-gray-600 h-6 mx-2"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300 hidden lg:block",children:null==c?void 0:c.email}),(0,a.jsx)("button",{onClick:x,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm font-medium transition-colors",children:"Sign Out"})]})]}),t&&(0,a.jsx)("div",{className:"md:hidden py-3 animate-fade-in",children:(0,a.jsxs)("nav",{className:"flex flex-col space-y-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[(0,a.jsx)(i(),{href:"/admin",className:"px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors",onClick:()=>d(!1),children:"Dashboard"}),(0,a.jsx)(i(),{href:"/admin/products",className:"px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors",onClick:()=>d(!1),children:"Products"}),(0,a.jsx)(i(),{href:"/",className:"px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors",onClick:()=>d(!1),children:"Back to Site"}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-300",children:null==c?void 0:c.email}),(0,a.jsx)("button",{onClick:x,className:"px-3 py-2 text-left rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",children:"Sign Out"})]})})]})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:r})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[354,874,441,684,358],()=>r(5771)),_N_E=e.O()}]);